<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Pok√©mon Sidebar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" />
  <link href="css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="css/sidebar.css" />
</head>
<!-- ADD user input instead of alart -->

<body>
  <header class="hdr">
    <div class="title">
      <span>Pok√©mon</span><span id="pokeStopPanel"></span>
    </div>
    <!-- header: add Battle button -->
    <nav class="hdr-actions">
      <button id="btnHome" class="btn btn-success btn-sm" title="Home">
        Home
      </button>
      <!--<button id="btnBattle" class="btn btn-success btn-sm" title="Battle Wild Pok√©mon">‚öîÔ∏è Battle</button>-->
      <button id="btnPokeStop" class="btn btn-success btn-sm text-start w-auto" title="Spin Pok√©Stop">
        üìç Pok√©Stop
      </button>
      <ul id="navPrimary" class="hdr-nav w-auto"></ul>
      <ul id="navSecondary" class="hdr-nav w-auto"></ul>
    </nav>
  </header>

  <!-- ============= Register / Login VIEW ============= -->
  <section id="viewLoginRegister" class="h-auto d-flex align-items-center justify-content-center bg-dark bg-gradient hidden">
    <div class="card shadow-lg border-0" style="max-width: 420px; width: 100%">
      <div class="card-body p-4 p-md-5 align-items-center justify-content-center">
        <div id="statusLogin" class="small d-flex mb-3 text-white align-items-center justify-content-center">
          Loading Login‚Ä¶
        </div>

        <div id="loginDiv" class="hidden">
          <div class="text-center mb-4">
            <div
              class="rounded-circle bg-primary bg-opacity-10 d-inline-flex align-items-center justify-content-center mb-2"
              style="width: 64px; height: 64px">
              <i class="bi bi-person-circle fs-1 text-primary"></i>
            </div>
            <h4 class="fw-bold mb-1 text-primary">Welcome Back</h4>
            <p class="small mb-0 text-white">
              Sign in to continue your adventure
            </p>
          </div>

          <form>
            <div class="mb-3">
              <label for="username" class="form-label text-white">Username</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-person-fill"></i></span>
                <input autocomplete="username" type="text" placeholder="Enter your username" id="username"
                  class="form-control" />
              </div>
            </div>

            <div class="mb-3">
              <label for="password" class="form-label text-white">Password</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-lock-fill"></i></span>
                <input autocomplete="current-password" type="password" placeholder="Enter your password" id="password"
                  class="form-control" />
                <button type="button" class="btn btn-outline-secondary" id="togglePassword" tabindex="-1">
                  <i class="bi bi-eye-slash" id="togglePasswordIcon"></i>
                </button>
              </div>
            </div>

            <div class="d-flex justify-content-between align-items-center mb-3">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="rememberMe" />
                <label class="form-check-label small text-white" for="rememberMe">Remember me</label>
              </div>
            </div>

            <div class="d-grid mb-3">
              <button id="loginBtn" type="button" class="btn btn-primary btn-lg">
                <i class="bi bi-box-arrow-in-right me-1"></i> Login
              </button>
            </div>

            <div class="text-center">
              <span class="text-white small">Don‚Äôt have an account?</span>
              <a href="#" class="small ms-1" id="registerMe">Register</a>
            </div>
          </form>
        </div>
        <!-- ‚úÖ closes #loginDiv -->
      </div>
    </div>
  </section>
  <section id="viewRegister" class="h-auto d-flex align-items-center justify-content-center bg-dark bg-gradient hidden">
    <div class="card shadow-lg border-0" style="max-width: 420px; width: 100%">
      <div class="card-body p-4 p-md-5 align-items-center justify-content-center">
        <div id="statusRegister" class="small d-flex mb-3 text-white align-items-center justify-content-center">
          Loading Register‚Ä¶
        </div>
        <div id="registerDiv" class="">
          <div class="text-center mb-4">
            <div
              class="rounded-circle bg-success bg-opacity-10 d-inline-flex align-items-center justify-content-center mb-2"
              style="width: 64px; height: 64px">
              <i class="bi bi-person-plus-fill fs-1 text-success"></i>
            </div>
            <h4 class="fw-bold mb-1 text-success">Create Account</h4>
            <p class="small mb-0 text-white">Join and start your adventure</p>
          </div>

          <form>
            <div class="mb-3">
              <label for="reg_username" class="form-label text-white">Username</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-person-fill"></i></span>
                <input autocomplete="username" type="text" placeholder="Choose a username" id="reg_username"
                  class="form-control" />
              </div>
            </div>

            <div class="mb-3">
              <label for="reg_password" class="form-label text-white">Password</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-lock-fill"></i></span>
                <input autocomplete="new-password" type="password" placeholder="Create a password" id="reg_password"
                  class="form-control" />
              </div>
            </div>

            <div class="mb-3">
              <label for="reg_password_confirm" class="form-label text-white">
                Confirm Password
              </label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-lock-fill"></i></span>
                <input autocomplete="new-password" type="password" placeholder="Confirm your password"
                  id="reg_password_confirm" class="form-control" />
              </div>
            </div>

            <div class="d-flex justify-content-between align-items-center mb-3">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="reg_terms" />
                <label class="form-check-label small text-white" for="reg_terms">I agree to the terms</label>
              </div>
            </div>

            <div class="d-grid mb-3">
              <button id="registerBtn" type="button" class="btn btn-success btn-lg">
                <i class="bi bi-person-plus me-1"></i> Register
              </button>
            </div>

            <div class="text-center">
              <span class="text-white small">Already have an account?</span>
              <a href="#" class="small ms-1" id="goToLoginLink">Login</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>
  <!-- ============= PICKER / RESULT VIEW ============= -->
  <section id="viewPicker" class="card">
    <div id="status" class="muted small">Loading choices‚Ä¶</div>
    <div id="balls" class="balls hidden"><!-- 3 balls go here --></div>
  </section>
  <section id="resultCard" class="card hidden">
    <div class="result">
      <div class="result-sprite" id="resultSprite"></div>
      <div class="result-info">
        <div id="resultName" class="name">‚Äî</div>
        <div id="resultMeta" class="muted small">‚Äî</div>
      </div>
    </div>

    <hr class="sep" />
    <div id="resultTypes" class="types"></div>
    <div id="resultStats" class="stats small resultStats"></div>

    <div class="row">
      <button id="fetchMore" class="btn btn-info">Fetch More Data</button>
      <span id="fetchMoreStatus" class="muted tiny"></span>
    </div>

    <!-- Dev helper to simulate catching until real catching is added -->
    <div id="devPanel" class="row">
      <button id="devAddToDex" class="btn small bg-success" title="Temporary dev helper">
        Add to Pok√©dex (dev)
      </button>
      <span id="devAddStatus" class="muted tiny"></span>
    </div>
  </section>
  <!-- ============= Store ============= -->
  <section id="viewStore" class="hidden card p-2" style="max-height:70vh; overflow-y:auto;">
    <h3 class="text-center mb-3">üõí Pok√©mon Store</h3>

    <input id="storeSearch" type="text" class="form-control mb-3" placeholder="Search items‚Ä¶">

    <select id="storeCategory" class="form-select mb-3">
      <option value="">All Categories</option>
      <option value="standard-balls">Balls</option>
      <option value="healing">Healing</option>
      <option value="stat-boost">Stat Boost</option>
      <option value="machines">Machines</option>
    </select>

    <!-- Grid container -->
    <div id="storeItems" class="row row-cols-2 row-cols-md-4 g-2"></div>
  </section>
  <!-- ============= BATTLE VIEW (top-level, not nested) ============= -->
  <section id="viewBattle" class="card hidden">
    <div id="battlePanel" class="battle-panel">
      <div class="muted small">
        Tap ‚ÄúStart Battle‚Äù to encounter a random wild Pok√©mon (Gen 1‚Äì5).
      </div>
    </div>
    <div class="row">
      <button id="btnStartBattle" class="btn bg-success btn-sm w-auto">
        Start Battle
      </button>
      <span id="battleStatus" class="muted tiny"></span>
    </div>
  </section>
  <!-- ============= ONLINE BATTLE VIEW ============= -->
  <section id="viewOnlineBattle" class="h-auto d-flex align-items-center justify-content-center bg-dark bg-gradient hidden">
    <div class="card shadow-lg border-0" style="max-width: 520px; width: 100%">
      <div class="card-body p-4 p-md-5">
        <!-- Header -->
        <div class="text-center mb-4">
          <div
            class="rounded-circle bg-danger bg-opacity-10 d-inline-flex align-items-center justify-content-center mb-2"
            style="width: 72px; height: 72px">
            <i class="bi bi-crosshair2 fs-1 text-danger"></i>
          </div>
          <h3 class="fw-bold text-danger mb-1">Online Battle</h3>
          <p class="small text-white-50 mb-0">
            Fight players around the world in real-time Pok√©mon battles!
          </p>
        </div>

        <!-- Battle Content -->
        <div id="battleContent" class="mb-4 text-center text-white">
          <p id="bcText" class="mb-1 fs-5 fw-light">
            Choose how you want to battle:
          </p>
          <div id="turnTimerLabel" class="badge bg-warning text-dark">1:00</div>
        </div>

        <!-- Find Match Button -->
        <div class="d-grid mb-3">
          <button id="btnFindMatch" class="btn btn-danger btn-lg">
            <i class="bi bi-lightning-charge-fill me-1"></i> Find Match
          </button>
        </div>

        <!-- Create / Join Room -->
        <div class="d-flex flex-column gap-2">
          <div class="input-group">
            <span class="input-group-text">
              <i class="bi bi-door-open"></i>
            </span>
            <input type="text" id="roomCodeInput" class="form-control" placeholder="Enter Room Code" />
            <button class="btn btn-primary" id="btnJoinRoom">
              <i class="bi bi-box-arrow-in-right"></i>
            </button>
          </div>

          <button id="btnCreateRoom" class="btn btn-outline-primary w-100">
            <i class="bi bi-plus-circle me-1"></i> Create Private Room
          </button>
        </div>

        <!-- Divider -->
        <hr class="text-secondary my-4" />

        <!-- Back -->
        <div class="text-center">
          <button id="btnOnlineBack" class="btn btn-outline-light">
            <i class="bi bi-arrow-left"></i> Back
          </button>
        </div>
      </div>
    </div>
  </section>
  <!-- ============= POKEDEX VIEW ============= -->
  <section id="viewDex" class="card hidden viewDex">
    <div class="dex-header">
      <div class="name">Pok√©dex</div>
      <input id="dexSearch" class="input" type="text" placeholder="Search name or #..." />
    </div>

    <div id="dex-tools" class="dex-tools">
      <button id="btnAddOwned" class="btn small">Add Owned</button>
      <span id="addOwnedHint" class="muted tiny">Paste names or Dex #, comma/line-separated</span>
    </div>

    <div id="addOwnedPanel" class="add-owned hidden">
      <textarea id="addOwnedInput" rows="4" placeholder="e.g.
Bulbasaur
4
Squirtle, 25, eevee"></textarea>
      <div class="row">
        <button id="addOwnedSave" class="btn">Save</button>
        <button id="addOwnedCancel" class="btn">Cancel</button>
        <span id="addOwnedStatus" class="muted tiny"></span>
      </div>
    </div>

    <!-- Fixed-height scroll area -->
    <div class="dex-scroll">
      <div id="dexList" class="dex-list"><!-- rows injected here --></div>
      <div id="dexEmpty" class="muted small hidden">
        No Pok√©mon caught yet.
      </div>
    </div>
  </section>
  <!-- ============= PARTY / STORAGE VIEW ============= -->
  <section id="viewParty" class="card hidden">
    <div class="party-header">
      <div class="name">Party & Storage</div>

      <div class="box-nav">
        <button id="boxPrev" class="btn btn-success btn-sm" title="Previous Box">
          ‚ü®
        </button>
        <span id="boxTitle" class="muted small">Box 1</span>
        <button id="boxNext" class="btn btn-success btn-sm" title="Next Box">
          ‚ü©
        </button>
      </div>
    </div>

    <!-- Party (max 6) -->
    <div class="party-wrap">
      <div class="party-grid" id="partyGrid"><!-- 6 slots injected --></div>
      <div class="tiny muted">
        Drag from storage into the party to swap; drag party ‚Üí storage to
        store.
      </div>
    </div>

    <hr class="sep" />

    <!-- Storage (30 per box, 5√ó6) -->
    <div class="storage-wrap">
      <div id="storageGrid" class="storage-grid">
        <!-- 30 slots injected -->
      </div>
    </div>
  </section>
  <!-- ============= SETTINGS VIEW ============= -->
  <section id="viewSettings" class="card justify-content-center text-center hidden">
    <div class="dex-header form-control justify-content-center">
      <div class="name">Settings</div>
    </div>
    <form class="settings-form form-control">
      <div class="settings-row m-2">
        <label class="settings-label form-check-label" for="aduioEnabled">
          <span class="form-text">Enable Sounds</span>
        </label>
        <input id="aduioEnabled" type="checkbox" class="form-check-input" />
      </div>
      <div class="settings-row m-2">
        <label class="settings-label form-check-label" for="audioVolume">
          <span class="form-text">Volume</span>
          <small id="audioVolumeVal" class="muted form-text">80%</small>
        </label>
        <input id="audioVolume" type="range" min="0" max="100" step="1" value="80%" class="form-range w-auto" />
      </div>
      <div class="settings-row m-2">
        <label class="settings-label form-check-label" for="testSound">
          <span class="form-text">Auto-play sounds (no click)</span>
        </label>
        <button id="testSound" type="button" class="btn btn-success btn-sm">
          <i class="bi bi-play-fill"></i>
          Test Sound
        </button>
      </div>
      <div class="settings-row m-2">
        <label class="settings-label form-check-label" for="migrateData">
          <span class="form-text">Migrate Data</span>
        </label>
        <button id="migrateData" type="button" class="btn btn-success btn-sm">
          Migrate Old Data
        </button>
      </div>
      <div class="settings-row m-2">
        <label class="settings-label form-check-label" for="saveBtn">
          <span class="form-text">Auto-play sounds (no click)</span>
        </label>
        <button id="saveBtn" type="button" class="btn btn-success btn-sm">
          <i class="bi bi-play-fill"></i>
          Save Data
        </button>
      </div>
    </form>
  </section>

  <!-- Move Tutor Modal -->
  <div class="modal fade" id="moveTutorModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content bg-dark text-white">
        <div class="modal-header">
          <h5 class="modal-title">Move Tutor</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>

        <div class="modal-body">
          <div id="moveTutorBody"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="battleMoveModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-lg">
          <div class="modal-content bg-dark text-white">
              <div class="modal-header">
                  <h5 class="modal-title">Choose a Move</h5>
                  <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
              </div>
              <div class="modal-body">
                  <div id="battleMoveBody"></div>
              </div>
          </div>
      </div>
  </div>

  <footer class="muted tiny d-flex gap-2 mx-3 my-2 justify-content-center">
    <span>v</span>
    <span id="ver"></span>
    <span> | </span>
    <span>by </span>
    <a href="https://dstokesncstudio.com" target="_blank" rel="noopener">dstokesncstudio.com</a>
    <span> | </span>
    <div>
      <span class="text-white">Current Coins: </span><span id="userCoins" class="text-success fw-bolder"></span>
    </div>
  </footer>

  <script type="module" src="js/pokemonData.js"></script>
  <script type="module" src="js/itemsMachines.js"></script>
  <script type="module" src="js/moves.js"></script>
  <script type="module" src="js/sidebar.js"></script>
  <script src="js/bootstrap.bundle.min.js"></script>
</body>

</html>